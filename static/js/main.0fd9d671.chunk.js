(this["webpackJsonpup-sample-react-app"]=this["webpackJsonpup-sample-react-app"]||[]).push([[0],{1024:function(e,t){},1025:function(e,t){},1189:function(e,t){},1309:function(e,t,n){"use strict";n.r(t);var c=n(9),r=n.n(c),a=n(249),s=n.n(a),o=(n(588),n(102)),i=(n(589),n(254)),u=n(35),l=n(0),d=n.n(l),p=n(17),b=n(31),f=n(565),h=n.n(f),j=n(178),O=n.n(j),x="https://rpc.l14.lukso.network";var v,k=function(){var e=Object(p.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=parseFloat,e.t1=t.utils,e.next=4,t.eth.getBalance(n);case 4:return e.t2=e.sent,e.t3=e.t1.fromWei.call(e.t1,e.t2),e.abrupt("return",(0,e.t0)(e.t3));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(p.a)(d.a.mark((function e(t){var n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="mypassword",t.eth.accounts.wallet.load(n),t.eth.accounts.wallet.length){e.next=10;break}console.log("No account detected, generating and saving a new account..."),t.eth.accounts.wallet.create(1),t.eth.accounts.wallet.save(n),console.log("My new key address:",t.eth.accounts.wallet[0].address),console.log("Private key:",t.eth.accounts.wallet[0].privateKey),e.next=20;break;case 10:return c=t.eth.accounts.wallet[0].address,console.log("Loaded existing key address ",c),console.log("Private key:",t.eth.accounts.wallet[0].privateKey),e.t0=console,e.t1=t.utils,e.next=17,t.eth.getBalance(c);case 17:e.t2=e.sent,e.t3=e.t1.fromWei.call(e.t1,e.t2,"ether"),e.t0.log.call(e.t0,"Balance ",e.t3,"LYXt");case 20:return e.abrupt("return",t.eth.accounts.wallet[0].address);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=n(582),g=function(){var e=Object(p.a)(d.a.mark((function e(t){var n,c,r,a,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[{name:"SupportedStandards:LSP3UniversalProfile",key:"0xeafec4d89fa9619884b6b89135626455000000000000000000000000abe425d6",keyType:"Mapping",valueContent:"0xabe425d6",valueType:"bytes"},{name:"LSP3Profile",key:"0x5ef83ad9559033e6e941db7d7c495acdce616347d28e90c7ce47cbfcfcad3bc5",keyType:"Singleton",valueContent:"JSONURL",valueType:"bytes"},{name:"LSP1UniversalReceiverDelegate",key:"0x0cfc51aec37c55a4d0b1a65c6255c4bf2fbdf6277f3cc0730c45b828b6db8b47",keyType:"Singleton",valueContent:"Address",valueType:"address"}],c=new O.a.providers.HttpProvider(x),r={ipfsGateway:"https://ipfs.lukso.network/ipfs/"},a=new y.a(n,t,c,r),e.next=6,a.fetchData();case 6:return s=e.sent,console.log(s),e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=n(152),C=function(){var e=Object(p.a)(d.a.mark((function e(t,n){var c,r,a,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.eth.accounts.wallet[0].privateKey,x,22,a=new w.l("https://rpc.l14.lukso.network",{deployKey:r,chainId:22}),console.log("\ud83d\ude80 Deploying LSP3UniversalProfile contract..."),e.next=7,a.LSP3UniversalProfile.deploy({controllingAccounts:[n],lsp3Profile:{name:"My Universal Profile",description:"My Cool Universal Profile",backgroundImage:[],tags:["Public Profile"],links:[{title:"My Website",url:"http://my-website.com"}]}});case 7:return s=e.sent,console.log("\u2705 Deployment and configuration successful"),console.log("Contracts:",s),e.abrupt("return",null===(c=s.ERC725Account)||void 0===c?void 0:c.address);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=Object(p.a)(d.a.mark((function e(t,n,c){var r,a,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.eth.accounts.wallet[0].privateKey,x,22,a=new w.l("https://rpc.l14.lukso.network",{deployKey:r,chainId:22}),console.log("\ud83d\ude80 [reactive] Deploying LSP3UniversalProfile contract..."),a.LSP3UniversalProfile.deployReactive({controllingAccounts:[n],lsp3Profile:{name:"My Universal Profile",description:"My Cool Universal Profile",backgroundImage:[],tags:["Public Profile"],links:[{title:"My Website",url:"http://my-website.com"}]}}).subscribe({next:function(e){console.log(e);var t="";if(t=e.type===w.c.TRANSACTION?"".concat(e.contractName,": ").concat(e.functionName," ").concat(e.status):"".concat(e.contractName,": ").concat(e.status),e.status===w.b.COMPLETE)o.b.success(t);else o.b.info(t);e.type===w.c.PROXY&&e.status===w.b.PENDING&&"ERC725Account"===e.contractName&&e.receipt&&(s=e.receipt.contractAddress)},complete:function(){o.b.success("Deployment successful"),c(s)}});case 6:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),P=n(571),E=n(572),A=function(){var e=Object(p.a)(d.a.mark((function e(t,n){var c,r,a,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=new t.eth.Contract(P.abi,n),e.next=3,c.methods.owner().call();case 3:return r=e.sent,console.log("UP owner address (KeyManager SC):",r),a=new t.eth.Contract(E.abi,r),s=c.methods.setData(["0x5ef83ad9559033e6e941db7d7c495acdce616347d28e90c7ce47cbfcfcad3bc5"],["0x6f357c6ad6c04598b25d41b96fb88a8c8ec4f4c3de2dc9bdaab7e71f40ed012b84d0c126697066733a2f2f516d6262447348577a4d4d724538594345766e3342633254706756793176535736414d3946376168595642573874"]).encodeABI(),e.next=9,a.methods.execute(s).send({from:t.eth.accounts.wallet[0].address,gas:2e5,gasPrice:t.utils.toWei("20","gwei")});case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S=n(19);!function(e){e[e.CREATE_ACCOUNT=0]="CREATE_ACCOUNT",e[e.FUND_ACCOUNT=1]="FUND_ACCOUNT",e[e.DEPLOY_UP=2]="DEPLOY_UP",e[e.FETCH_DATA=3]="FETCH_DATA",e[e.INTERACT_WITH_CONTRACT=4]="INTERACT_WITH_CONTRACT",e[e.DONE=5]="DONE"}(v||(v={}));var N=function(){var e=Object(c.useState)(""),t=Object(b.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(!1),s=Object(b.a)(a,2),u=s[0],l=s[1],f=Object(c.useState)(0),j=Object(b.a)(f,2),y=j[0],w=j[1],P=Object(c.useState)(""),E=Object(b.a)(P,2),N=E[0],U=E[1],D=Object(c.useState)(!1),_=Object(b.a)(D,2),L=_[0],F=_[1],R=Object(c.useState)({}),I=Object(b.a)(R,2),M=I[0],H=I[1],Y=Object(c.useState)(v.CREATE_ACCOUNT),W=Object(b.a)(Y,2),K=W[0],B=W[1],J=function(){var e=Object(c.useState)(),t=Object(b.a)(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new O.a(x),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e().then((function(e){r(e)}))}),[]),n}();return Object(c.useEffect)((function(){n&&J&&k(J,n).then((function(e){w(e),e>0&&B(v.DEPLOY_UP)}))}),[n,J]),Object(c.useEffect)((function(){K===v.DONE&&l(!0)}),[K]),Object(c.useEffect)((function(){N&&B(v.FETCH_DATA)}),[N]),J?Object(S.jsxs)("div",{children:[Object(S.jsx)(h.a,{run:u,numberOfPieces:50}),Object(S.jsx)("h1",{children:"\ud83c\udd99 Sample React App"}),Object(S.jsxs)("p",{children:["This is a sample repo for the"," ",Object(S.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://docs.lukso.tech/tools/getting-started",children:"Getting Started"})," ","tutorial.",Object(S.jsx)("br",{}),"Let's deploy a Universal Profile, configure it and interact with it.",Object(S.jsx)("br",{}),"It is recommanded to open the developer console to check the logs."]}),Object(S.jsxs)("p",{children:[Object(S.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/Hugoo/up-sample-react-app",children:"GitHub"})," ","- ",Object(S.jsx)(i.b,{to:"/tx",children:"Transactions"})]}),Object(S.jsxs)("h2",{children:["1. ",n&&"\u2705"," \ud83d\udd11 Create/Get account"]}),n?Object(S.jsxs)("p",{children:["Account (EOA) loaded:"," ",Object(S.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://blockscout.com/lukso/l14/address/".concat(n),children:n})]}):Object(S.jsx)("p",{children:Object(S.jsx)("button",{onClick:Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(J);case 2:t=e.sent,r(t),B(v.FUND_ACCOUNT);case 5:case"end":return e.stop()}}),e)}))),children:"Get/create account"})}),K>=v.FUND_ACCOUNT&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)("h2",{children:["2. ",y>0&&"\u2705"," \ud83d\udcb0 Fund account"]}),Object(S.jsxs)("p",{children:["Account balance is: ",Object(S.jsxs)("strong",{children:[y," LYXt"]})," ",Object(S.jsx)("button",{onClick:Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,k(J,n);case 4:t=e.sent,w(t),t>0&&B(v.DEPLOY_UP);case 7:case"end":return e.stop()}}),e)}))),children:"Refresh balance"}),Object(S.jsx)("br",{}),Object(S.jsx)("a",{href:"http://faucet.l14.lukso.network/",target:"_blank",rel:"noreferrer",children:"Use Faucet to fund account"})]})]}),K>=v.DEPLOY_UP&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)("h2",{children:["3. ",N&&"\u2705"," \ud83d\ude80 Deploy LSP3 UP Smart contract with lsp-factory.js"]}),Object(S.jsxs)("p",{children:["With"," ",Object(S.jsx)("a",{href:"https://docs.lukso.tech/tools/lsp-factoryjs/getting-started",target:"_blank",rel:"noreferrer",children:"lsp-factory.js"}),", we can simply deploy and configure a Universal Profile smart contract:"]}),Object(S.jsx)("button",{onClick:Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F(!0),U(""),e.prev=2,e.next=5,C(J,n);case 5:(t=e.sent)&&U(t),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0),o.b.error("There was an error, please check console logs.");case 13:F(!1);case 14:case"end":return e.stop()}}),e,null,[[2,9]])}))),children:"Deploy LSP3 UP contract"})," ",Object(S.jsx)("button",{onClick:Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:F(!0),U("");try{T(J,n,(function(e){U(e),F(!1)}))}catch(t){console.error(t),o.b.error("There was an error, please check console logs."),F(!1)}case 3:case"end":return e.stop()}}),e)}))),children:"Deploy LSP3 UP contract [reactive mode]"}),L&&Object(S.jsxs)("p",{children:["\ud83d\udd04 Deploying contracts, it can take up to 2 minutes...",Object(S.jsx)("br",{}),"\ud83d\udca1 You can monitor the contracts deployments/setup on"," ",Object(S.jsx)("a",{href:"https://blockscout.com/lukso/l14/address/".concat(n,"/transactions"),target:"_blank",rel:"noreferrer",children:"Blocksout"}),"."]}),N&&Object(S.jsxs)("p",{children:["ERC725ContractAddress deployed:"," ",Object(S.jsx)("a",{href:"https://universalprofile.cloud/".concat(N),target:"_blank",rel:"noreferrer",children:N})," ","[",Object(S.jsx)("a",{href:"https://blockscout.com/lukso/l14/address/".concat(N,"/transactions"),target:"_blank",rel:"noreferrer",children:"blockscout"}),"] [",Object(S.jsx)("a",{href:"https://erc725-inspect.lukso.tech/?address=".concat(N),target:"_blank",rel:"noreferrer",children:"inspect"}),"]"]})]}),K>=v.FETCH_DATA&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)("h2",{children:["4. ",Object.keys(M).length>0&&"\u2705"," \ud83d\udd04 Fetch contract data with erc725.js"]}),Object(S.jsxs)("p",{children:[Object(S.jsx)("a",{href:"https://docs.lukso.tech/tools/erc725js/getting-started",target:"_blank",rel:"noreferrer",children:"erc725.js"})," ","makes it easy to fetch and decode an ERC725Y smart contract keys/values."]}),Object(S.jsx)("button",{onClick:Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(N);case 2:t=e.sent,H(t),t!=={}&&K!==v.DONE&&B(v.INTERACT_WITH_CONTRACT);case 5:case"end":return e.stop()}}),e)}))),children:"Fetch ERC725 keys/values"}),Object.keys(M).length>0&&Object(S.jsx)("pre",{children:JSON.stringify(M,null,2)})]}),K>=v.INTERACT_WITH_CONTRACT&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)("h2",{children:["5. ",K===v.DONE&&"\u2705"," \ud83e\uddd9 Interact with contract"]}),Object(S.jsxs)("p",{children:[Object(S.jsx)("a",{href:"https://www.npmjs.com/package/@lukso/universalprofile-smart-contracts",target:"_blank",rel:"noreferrer",children:"universalprofile-smart-contracts"})," ","lets you use the LUKSO's smart contract ABIs."]}),Object(S.jsx)("button",{onClick:Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(J,N);case 2:B(v.DONE);case 3:case"end":return e.stop()}}),e)}))),children:"Execute a transaction"}),K===v.DONE&&Object(S.jsx)("p",{children:"The contract data have been updated, you can refresh the data again at the previous step to see updated data."})]}),K>=v.DONE&&Object(S.jsx)("h2",{children:"Congratulations \ud83c\udf89\ud83e\udd73"})]}):Object(S.jsx)("div",{children:"'Loading web3'"})},U=n(581),D=n(580),_=n.n(D),L="10000000000",F={setData:{inputs:[{internalType:"bytes32[]",name:"_keys",type:"bytes32[]"},{internalType:"bytes[]",name:"_values",type:"bytes[]"}],name:"setData",outputs:[],stateMutability:"nonpayable",type:"function"}},R=function(){var e=Object(c.useState)(),t=Object(b.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(),s=Object(b.a)(a,2),o=s[0],i=s[1],u=Object(c.useState)(),l=Object(b.a)(u,2),f=l[0],h=l[1],j={walletconnect:{display:{name:"Mobile"},package:U.a,options:{rpc:{56:"https://bsc-dataseed.binance.org/"},network:"binance",chainId:56}}},x=new _.a({network:"mainnet",cacheProvider:!1,providerOptions:j}),v=function(){var e=Object(p.a)(d.a.mark((function e(){var t,n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.connect();case 2:return t=e.sent,n=new O.a(t),window.web3=t,console.log("provider",t),r(n),e.prev=7,e.next=10,window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x16",chainName:"LUKSO L14",nativeCurrency:{name:"LUKSO",symbol:"LYX",decimals:18},rpcUrls:["https://rpc.l14.lukso.network"],blockExplorerUrls:["https://blockscout.com/lukso/l14"]}]});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),console.error("Could not set chain in the extension");case 15:return e.next=17,n.eth.getAccounts();case 17:c=e.sent,i(c[0]),t.on("connect",(function(e){console.log(e)})),t.on("accountsChanged",(function(e){console.log(e),i(e[0])})),t.on("chainChanged",(function(e){console.log(e)}));case 22:case"end":return e.stop()}}),e,null,[[7,12]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=3;break}return alert("not connected"),e.abrupt("return");case 3:return t=n.utils.toWei("0.1","ether"),e.next=6,n.eth.sendTransaction({from:o,to:"0x23a86EF830708204646abFE631cA1a60d04c4FbE",value:t,gasPrice:L}).once("sending",(function(e){console.log(e),h(JSON.stringify(e,null,2))}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=3;break}return alert("not connected"),e.abrupt("return");case 3:return t=new n.eth.Contract([F.setData],"0x23a86EF830708204646abFE631cA1a60d04c4FbE"),e.abrupt("return",t.methods.setData(["0x5ef83ad9559033e6e941db7d7c495acdce616347d28e90c7ce47cbfcfcad3bc5"],["0x6f357c6a70546a2accab18748420b63c63b5af4cf710848ae83afc0c51dd8ad17fb5e8b3697066733a2f2f516d65637247656a555156587057347a53393438704e76636e51724a314b69416f4d36626466725663575a736e35"]).send({from:o}).once("sending",(function(e){console.log(JSON.stringify(e,null,2)),h(JSON.stringify(e,null,2))})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{children:[Object(S.jsx)("h1",{children:"\ud83c\udd99 Sample React App - Transaction"}),Object(S.jsx)("p",{children:"Lets send tx !"}),Object(S.jsxs)("p",{children:[Object(S.jsx)("button",{onClick:o?function(){i(void 0),h(""),x.clearCachedProvider()}:v,children:o?"Connected: ".concat(o):"Connect"})," ","- Note: the extension SHOULD inject the UP SC address - not an EOA address."]}),Object(S.jsxs)("button",{onClick:k,children:["Send ","0.1"," LYX"]})," ",Object(S.jsx)("button",{onClick:m,children:"Set data"})," ",Object(S.jsx)("button",{onClick:y,children:"Set data [permissions]"}),Object(S.jsx)("pre",{children:f})]})},I=function(){return Object(S.jsx)(i.a,{basename:"up-sample-react-app",children:Object(S.jsxs)(u.c,{children:[Object(S.jsx)(u.a,{path:"/tx",element:Object(S.jsx)(R,{})}),Object(S.jsx)(u.a,{path:"/",element:Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(N,{}),Object(S.jsx)(o.a,{pauseOnFocusLoss:!0,newestOnTop:!0,autoClose:1e4})]})})]})})};s.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(I,{})}),document.getElementById("root"))},588:function(e,t,n){},603:function(e,t){},605:function(e,t){},607:function(e,t){},611:function(e,t){},636:function(e,t){},638:function(e,t){},653:function(e,t){},655:function(e,t){},671:function(e,t){},694:function(e,t){},696:function(e,t){},713:function(e,t){},724:function(e,t){},732:function(e,t){},740:function(e,t){},749:function(e,t){},757:function(e,t){},811:function(e,t){},847:function(e,t){},848:function(e,t){},871:function(e,t){},878:function(e,t){},885:function(e,t){},957:function(e,t){},964:function(e,t){},992:function(e,t){},999:function(e,t){}},[[1309,1,2]]]);
//# sourceMappingURL=main.0fd9d671.chunk.js.map