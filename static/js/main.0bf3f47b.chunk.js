(this["webpackJsonpup-sample-react-app"]=this["webpackJsonpup-sample-react-app"]||[]).push([[0],{360:function(e,t,c){},376:function(e,t){},378:function(e,t){},380:function(e,t){},384:function(e,t){},410:function(e,t){},412:function(e,t){},425:function(e,t){},427:function(e,t){},459:function(e,t){},461:function(e,t){},558:function(e,t){},559:function(e,t){},670:function(e,t){},678:function(e,t){},703:function(e,t){},704:function(e,t){},868:function(e,t,c){"use strict";c.r(t);var n=c(15),r=c.n(n),a=c(154),s=c.n(a),o=(c(360),c(77)),l=(c(361),c(0)),i=c.n(l),u=c(45),d=c(30),p=c(346),f=c.n(p),b=c(155),h=c.n(b),j="https://rpc.l14.lukso.network";var O,x=function(){var e=Object(u.a)(i.a.mark((function e(t,c){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=parseFloat,e.t1=t.utils,e.next=4,t.eth.getBalance(c);case 4:return e.t2=e.sent,e.t3=e.t1.fromWei.call(e.t1,e.t2),e.abrupt("return",(0,e.t0)(e.t3));case 7:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),k=function(){var e=Object(u.a)(i.a.mark((function e(t){var c,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c="mypassword",t.eth.accounts.wallet.load(c),t.eth.accounts.wallet.length){e.next=10;break}console.log("No account detected, generating and saving a new account..."),t.eth.accounts.wallet.create(1),t.eth.accounts.wallet.save(c),console.log("My new key address:",t.eth.accounts.wallet[0].address),console.log("Private key:",t.eth.accounts.wallet[0].privateKey),e.next=20;break;case 10:return n=t.eth.accounts.wallet[0].address,console.log("Loaded existing key address ",n),console.log("Private key:",t.eth.accounts.wallet[0].privateKey),e.t0=console,e.t1=t.utils,e.next=17,t.eth.getBalance(n);case 17:e.t2=e.sent,e.t3=e.t1.fromWei.call(e.t1,e.t2,"ether"),e.t0.log.call(e.t0,"Balance ",e.t3,"LYXt");case 20:return e.abrupt("return",t.eth.accounts.wallet[0].address);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=c(354),g=function(){var e=Object(u.a)(i.a.mark((function e(t){var c,n,r,a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=[{name:"SupportedStandards:LSP3UniversalProfile",key:"0xeafec4d89fa9619884b6b89135626455000000000000000000000000abe425d6",keyType:"Mapping",valueContent:"0xabe425d6",valueType:"bytes"},{name:"LSP3Profile",key:"0x5ef83ad9559033e6e941db7d7c495acdce616347d28e90c7ce47cbfcfcad3bc5",keyType:"Singleton",valueContent:"JSONURL",valueType:"bytes"},{name:"LSP1UniversalReceiverDelegate",key:"0x0cfc51aec37c55a4d0b1a65c6255c4bf2fbdf6277f3cc0730c45b828b6db8b47",keyType:"Singleton",valueContent:"Address",valueType:"address"}],n=new h.a.providers.HttpProvider(j),r={ipfsGateway:"https://ipfs.lukso.network/ipfs/"},a=new v.a(c,t,n,r),e.next=6,a.fetchData();case 6:return s=e.sent,console.log(s),e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=c(97),w=function(){var e=Object(u.a)(i.a.mark((function e(t,c){var n,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.eth.accounts.wallet[0].privateKey,j,22,r=new y.j("https://rpc.l14.lukso.network",{deployKey:n,chainId:22}),console.log("\ud83d\ude80 Deploying LSP3UniversalProfile contract..."),e.next=7,r.LSP3UniversalProfile.deploy({controllingAccounts:[c],lsp3Profile:{name:"My Universal Profile",description:"My Cool Universal Profile",backgroundImage:[],tags:["Public Profile"],links:[{title:"My Website",url:"http://my-website.com"}]}});case 7:return a=e.sent,console.log("\u2705 Deployment and configuration successful"),console.log("Contracts:",a),e.abrupt("return",a.ERC725Account.address);case 11:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),m=function(){var e=Object(u.a)(i.a.mark((function e(t,c,n){var r,a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.eth.accounts.wallet[0].privateKey,j,22,a=new y.j("https://rpc.l14.lukso.network",{deployKey:r,chainId:22}),console.log("\ud83d\ude80 [reactive] Deploying LSP3UniversalProfile contract..."),a.LSP3UniversalProfile.deployReactive({controllingAccounts:[c],lsp3Profile:{name:"My Universal Profile",description:"My Cool Universal Profile",backgroundImage:[],tags:["Public Profile"],links:[{title:"My Website",url:"http://my-website.com"}]}}).subscribe({next:function(e){console.log(e);var t="";if(t=e.type===y.c.TRANSACTION?"".concat(e.contractName,": ").concat(e.functionName," ").concat(e.status):"".concat(e.contractName,": ").concat(e.status),e.status===y.b.COMPLETE)o.b.success(t);else o.b.info(t);e.type===y.c.PROXY&&e.status===y.b.PENDING&&"ERC725Account"===e.contractName&&e.receipt&&(s=e.receipt.contractAddress)},complete:function(){o.b.success("Deployment successful"),n(s)}});case 6:case"end":return e.stop()}}),e)})));return function(t,c,n){return e.apply(this,arguments)}}(),C=c(352),T=c(353),P=function(){var e=Object(u.a)(i.a.mark((function e(t,c){var n,r,a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new t.eth.Contract(C.abi,c),e.next=3,n.methods.owner().call();case 3:return r=e.sent,console.log("UP owner address (KeyManager SC):",r),a=new t.eth.Contract(T.abi,r),s=n.methods.setData(["0x5ef83ad9559033e6e941db7d7c495acdce616347d28e90c7ce47cbfcfcad3bc5"],["0x6f357c6ad6c04598b25d41b96fb88a8c8ec4f4c3de2dc9bdaab7e71f40ed012b84d0c126697066733a2f2f516d6262447348577a4d4d724538594345766e3342633254706756793176535736414d3946376168595642573874"]).encodeABI(),e.next=9,a.methods.execute(s).send({from:t.eth.accounts.wallet[0].address,gas:2e5,gasPrice:t.utils.toWei("20","gwei")});case 9:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),E=c(17);!function(e){e[e.CREATE_ACCOUNT=0]="CREATE_ACCOUNT",e[e.FUND_ACCOUNT=1]="FUND_ACCOUNT",e[e.DEPLOY_UP=2]="DEPLOY_UP",e[e.FETCH_DATA=3]="FETCH_DATA",e[e.INTERACT_WITH_CONTRACT=4]="INTERACT_WITH_CONTRACT",e[e.DONE=5]="DONE"}(O||(O={}));var A=function(){var e=Object(n.useState)(""),t=Object(d.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)(!1),s=Object(d.a)(a,2),l=s[0],p=s[1],b=Object(n.useState)(0),v=Object(d.a)(b,2),y=v[0],C=v[1],T=Object(n.useState)(""),A=Object(d.a)(T,2),N=A[0],U=A[1],_=Object(n.useState)(!1),D=Object(d.a)(_,2),S=D[0],L=D[1],R=Object(n.useState)({}),F=Object(d.a)(R,2),I=F[0],H=F[1],M=Object(n.useState)(O.CREATE_ACCOUNT),W=Object(d.a)(M,2),Y=W[0],K=W[1],B=function(){var e=Object(n.useState)(),t=Object(d.a)(e,2),c=t[0],r=t[1];return Object(n.useEffect)((function(){var e=function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new h.a(j),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e().then((function(e){r(e)}))}),[]),c}();return Object(n.useEffect)((function(){c&&B&&x(B,c).then((function(e){C(e),e>0&&K(O.DEPLOY_UP)}))}),[c,B]),Object(n.useEffect)((function(){Y===O.DONE&&p(!0)}),[Y]),Object(n.useEffect)((function(){N&&K(O.FETCH_DATA)}),[N]),B?Object(E.jsxs)("div",{children:[Object(E.jsx)(f.a,{run:l,numberOfPieces:50}),Object(E.jsx)("h1",{children:"\ud83c\udd99 Sample React App"}),Object(E.jsxs)("p",{children:["This is a sample repo for the"," ",Object(E.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://docs.lukso.tech/tools/getting-started",children:"Getting Started"})," ","tutorial.",Object(E.jsx)("br",{}),"Let's deploy a Universal Profile, configure it and interact with it.",Object(E.jsx)("br",{}),"It is recommanded to open the developer console to check the logs."]}),Object(E.jsx)("p",{children:Object(E.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/Hugoo/up-sample-react-app",children:"GitHub"})}),Object(E.jsxs)("h2",{children:["1. ",c&&"\u2705"," \ud83d\udd11 Create/Get account"]}),c?Object(E.jsxs)("p",{children:["Account (EOA) loaded:"," ",Object(E.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://blockscout.com/lukso/l14/address/".concat(c),children:c})]}):Object(E.jsx)("p",{children:Object(E.jsx)("button",{onClick:Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(B);case 2:t=e.sent,r(t),K(O.FUND_ACCOUNT);case 5:case"end":return e.stop()}}),e)}))),children:"Get/create account"})}),Y>=O.FUND_ACCOUNT&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)("h2",{children:["2. ",y>0&&"\u2705"," \ud83d\udcb0 Fund account"]}),Object(E.jsxs)("p",{children:["Account balance is: ",Object(E.jsxs)("strong",{children:[y," LYXt"]})," ",Object(E.jsx)("button",{onClick:Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,x(B,c);case 4:t=e.sent,C(t),t>0&&K(O.DEPLOY_UP);case 7:case"end":return e.stop()}}),e)}))),children:"Refresh balance"}),Object(E.jsx)("br",{}),Object(E.jsx)("a",{href:"http://faucet.l14.lukso.network/",target:"_blank",rel:"noreferrer",children:"Use Faucet to fund account"})]})]}),Y>=O.DEPLOY_UP&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)("h2",{children:["3. ",N&&"\u2705"," \ud83d\ude80 Deploy LSP3 UP Smart contract with lsp-factory.js"]}),Object(E.jsxs)("p",{children:["With"," ",Object(E.jsx)("a",{href:"https://docs.lukso.tech/tools/lsp-factoryjs/getting-started",target:"_blank",rel:"noreferrer",children:"lsp-factory.js"}),", we can simply deploy and configure a Universal Profile smart contract:"]}),Object(E.jsx)("button",{onClick:Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(!0),U(""),e.prev=2,e.next=5,w(B,c);case 5:t=e.sent,U(t),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0),o.b.error("There was an error, please check console logs.");case 13:L(!1);case 14:case"end":return e.stop()}}),e,null,[[2,9]])}))),children:"Deploy LSP3 UP contract"})," ",Object(E.jsx)("button",{onClick:Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:L(!0),U("");try{m(B,c,(function(e){U(e),L(!1)}))}catch(t){console.error(t),o.b.error("There was an error, please check console logs."),L(!1)}case 3:case"end":return e.stop()}}),e)}))),children:"Deploy LSP3 UP contract [reactive mode]"}),S&&Object(E.jsxs)("p",{children:["\ud83d\udd04 Deploying contracts, it can take up to 2 minutes...",Object(E.jsx)("br",{}),"\ud83d\udca1 You can monitor the contracts deployments/setup on"," ",Object(E.jsx)("a",{href:"https://blockscout.com/lukso/l14/address/".concat(c,"/transactions"),target:"_blank",rel:"noreferrer",children:"Blocksout"}),"."]}),N&&Object(E.jsxs)("p",{children:["ERC725ContractAddress deployed:"," ",Object(E.jsx)("a",{href:"https://universalprofile.cloud/".concat(N),target:"_blank",rel:"noreferrer",children:N})," ","[",Object(E.jsx)("a",{href:"https://blockscout.com/lukso/l14/address/".concat(N,"/transactions"),target:"_blank",rel:"noreferrer",children:"blockscout"}),"] [",Object(E.jsx)("a",{href:"https://erc725-inspect.lukso.tech/?address=".concat(N),target:"_blank",rel:"noreferrer",children:"inspect"}),"]"]})]}),Y>=O.FETCH_DATA&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)("h2",{children:["4. ",Object.keys(I).length>0&&"\u2705"," \ud83d\udd04 Fetch contract data with erc725.js"]}),Object(E.jsxs)("p",{children:[Object(E.jsx)("a",{href:"https://docs.lukso.tech/tools/erc725js/getting-started",target:"_blank",rel:"noreferrer",children:"erc725.js"})," ","makes it easy to fetch and decode an ERC725Y smart contract keys/values."]}),Object(E.jsx)("button",{onClick:Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(N);case 2:t=e.sent,H(t),t!=={}&&Y!==O.DONE&&K(O.INTERACT_WITH_CONTRACT);case 5:case"end":return e.stop()}}),e)}))),children:"Fetch ERC725 keys/values"}),Object.keys(I).length>0&&Object(E.jsx)("pre",{children:JSON.stringify(I,null,2)})]}),Y>=O.INTERACT_WITH_CONTRACT&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)("h2",{children:["5. ",Y===O.DONE&&"\u2705"," \ud83e\uddd9 Interact with contract"]}),Object(E.jsxs)("p",{children:[Object(E.jsx)("a",{href:"https://www.npmjs.com/package/@lukso/universalprofile-smart-contracts",target:"_blank",rel:"noreferrer",children:"universalprofile-smart-contracts"})," ","lets you use the LUKSO's smart contract ABIs."]}),Object(E.jsx)("button",{onClick:Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(B,N);case 2:K(O.DONE);case 3:case"end":return e.stop()}}),e)}))),children:"Execute a transaction"}),Y===O.DONE&&Object(E.jsx)("p",{children:"The contract data have been updated, you can refresh the data again at the previous step to see updated data."})]}),Y>=O.DONE&&Object(E.jsx)("h2",{children:"Congratulations \ud83c\udf89\ud83e\udd73"})]}):Object(E.jsx)("div",{children:"'Loading web3'"})},N=function(){return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(A,{}),Object(E.jsx)(o.a,{pauseOnFocusLoss:!0,newestOnTop:!0,autoClose:1e4})]})};s.a.render(Object(E.jsx)(r.a.StrictMode,{children:Object(E.jsx)(N,{})}),document.getElementById("root"))}},[[868,1,2]]]);
//# sourceMappingURL=main.0bf3f47b.chunk.js.map